{
  "appId": "com.herotools.openwispr",
  "productName": "OpenWhispr",
  "protocols": {
    "name": "OpenWhispr Protocol",
    "schemes": ["openwhispr"]
  },
  "directories": {
    "output": "dist"
  },
  "npmRebuild": true,
  "buildDependenciesFromSource": false,
  "files": [
    "main.js",
    "preload.js",
    "package.json",
    "node_modules/**/*",
    "src/dist/**/*",
    "src/helpers/**/*",
    "src/config/**/*",
    "src/hooks/**/*",
    "src/models/**/*",
    "src/services/localReasoningBridge.js",
    "src/types/**/*",
    "src/utils.js",
    "src/utils/**/*",
    "src/updater.js",
    "src/components.json",
    "!node_modules/.cache/**/*",
    "!src/node_modules/**/*",

    "!**/node_modules/electron/**",
    "!**/node_modules/electron-builder/**",
    "!**/node_modules/app-builder-bin/**",
    "!**/node_modules/app-builder-lib/**",
    "!**/node_modules/builder-util/**",
    "!**/node_modules/dmg-builder/**",
    "!**/node_modules/7zip-bin/**",

    "!**/node_modules/typescript/**",
    "!**/node_modules/prettier/**",
    "!**/node_modules/eslint/**",
    "!**/node_modules/eslint-*/**",
    "!**/node_modules/@eslint/**",
    "!**/node_modules/@typescript-eslint/**",
    "!**/node_modules/globals/**",

    "!**/node_modules/vite/**",
    "!**/node_modules/@vitejs/**",
    "!**/node_modules/esbuild/**",
    "!**/node_modules/@esbuild/**",
    "!**/node_modules/rollup/**",
    "!**/node_modules/@rollup/**",

    "!**/node_modules/postcss/**",
    "!**/node_modules/autoprefixer/**",
    "!**/node_modules/tailwindcss/**",
    "!**/node_modules/@tailwindcss/**",
    "!**/node_modules/lightningcss*/**",

    "!**/node_modules/react/**",
    "!**/node_modules/react-dom/**",
    "!**/node_modules/lucide-react/**",
    "!**/node_modules/@radix-ui/**",
    "!**/node_modules/class-variance-authority/**",
    "!**/node_modules/clsx/**",
    "!**/node_modules/tailwind-merge/**",
    "!**/node_modules/tw-animate-css/**",
    "!**/node_modules/react-markdown/**",
    "!**/node_modules/shadcn-ui/**",

    "!**/node_modules/@types/**",
    "!**/node_modules/concurrently/**",
    "!**/node_modules/cross-env/**",
    "!**/node_modules/@electron/notarize/**",

    "!**/node_modules/**/test/**",
    "!**/node_modules/**/tests/**",
    "!**/node_modules/**/*.ts",
    "!**/node_modules/**/*.map",
    "!**/node_modules/**/CHANGELOG*",
    "!**/node_modules/**/.github/**"
  ],
  "asarUnpack": [
    "**/node_modules/ffmpeg-static/**/*",
    "**/node_modules/better-sqlite3/**/*"
  ],
  "extraResources": [
    "src/assets/**/*",
    "resources/macos-globe-listener.swift",
    "resources/bin/macos-globe-listener",
    "resources/bin/macos-fast-paste",
    {
      "from": "resources/bin/",
      "to": "bin/",
      "filter": ["whisper-cpp-*", "whisper-server-*", "llama-server-*", "sherpa-onnx-*", "windows-key-listener*", "*.dylib", "*.dll", "*.so*"]
    }
  ],
  "mac": {
    "category": "public.app-category.productivity",
    "target": ["dmg", "zip"],
    "icon": "src/assets/icon.icns",
    "gatekeeperAssess": false,
    "hardenedRuntime": true,
    "entitlements": "resources/mac/entitlements.mac.plist",
    "entitlementsInherit": "resources/mac/entitlements.mac.plist",
    "identity": "HeroTools Inc. (9R85XFMH59)",
    "extendInfo": {
      "LSUIElement": false,
      "NSMicrophoneUsageDescription": "OpenWhispr needs microphone access for speech-to-text transcription.",
      "NSAccessibilityUsageDescription": "OpenWhispr needs accessibility permissions to paste transcribed text into other applications."
    }
  },
  "win": {
    "target": [
      "nsis",
      "portable"
    ],
    "icon": "src/assets/icon.ico",
    "signAndEditExecutable": false
  },
  "linux": {
    "target": [
      "AppImage",
      "deb",
      "rpm",
      "tar.gz"
    ],
    "icon": "src/assets/icon.png",
    "category": "Utility",
    "artifactName": "${productName}-${version}-${os}-${arch}.${ext}"
  },
  "flatpak": {
    "runtime": "org.freedesktop.Platform",
    "runtimeVersion": "24.08",
    "sdk": "org.freedesktop.Sdk",
    "useWaylandFlags": true,
    "finishArgs": [
      "--socket=wayland",
      "--socket=fallback-x11",
      "--share=network",
      "--share=ipc",
      "--device=dri",
      "--socket=pulseaudio",
      "--filesystem=home",
      "--filesystem=xdg-documents",
      "--filesystem=xdg-download",
      "--talk-name=org.freedesktop.Notifications",
      "--talk-name=org.freedesktop.portal.Desktop"
    ]
  },
  "deb": {
    "afterRemove": "resources/linux/after-remove.sh",
    "fpm": ["--deb-recommends", "xdotool", "--deb-recommends", "wtype", "--deb-recommends", "wl-clipboard"]
  },
  "rpm": {
    "fpm": ["--rpm-tag", "Recommends: xdotool", "--rpm-tag", "Recommends: wtype", "--rpm-tag", "Recommends: wl-clipboard"]
  },
  "nsis": {
    "oneClick": false,
    "allowToChangeInstallationDirectory": true,
    "createDesktopShortcut": true,
    "createStartMenuShortcut": true,
    "include": "resources/nsis/cleanup-models.nsh"
  },
  "dmg": {
    "title": "OpenWhispr",
    "icon": "src/assets/icon.icns",
    "window": {
      "width": 540,
      "height": 380
    }
  },
  "publish": {
    "provider": "github",
    "owner": "OpenWhispr",
    "repo": "openwhispr",
    "private": false,
    "releaseType": "draft"
  }
}
